{% extends "layout.html" %}
{% block body %}

<div class="container">
  <table class="table table-condensed">
    <thead>
      <tr>
        <th data-sort="string">UNIT</th>
        <th data-sort="string">DSTATE</th>
        <th data-sort="string">STATE</th>
      </tr>
    </thead>
    <tbody>
      {% for unit in units %}

      {% if unit.currentState == "launched" %}
        <tr data-href="/units/{{ unit.name }}" class="success">
      {% elif unit.currentState == "failed" %}
        <tr data-href="/units/{{ unit.name }}" class="danger">
      {% elif unit.currentState == "inactive" %}
        <tr data-href="/units/{{ unit.name }}" class="warning">
      {% elif unit.currentState == "loaded" %}
        <tr data-href="/units/{{ unit.name }}" class="active">
      {% else %}
        <tr data-href="/units/{{ unit.name }}">
      {% endif %}

        <td>{{ unit.name }}</td>
        <td class="{{ unit.desiredState }}">{{ unit.desiredState }}</td>
        <td class="{{ unit.currentState }}">{{ unit.currentState }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
$(function() {
  $("table").stupidtable();
  $('tr[data-href]').on("click", function() {
    document.location = $(this).data('href');
  });

  $('#units').attr("class", "active");

});
</script>
{% endblock %}
